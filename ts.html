{"openapi":"3.0.2","info":{"title":"TrainingServer","version":"0.9.0"},"paths":{"/aakr/{modelname}":{"get":{"tags":["AAKR"],"summary":"Load AAKR model data","operationId":"load_aakr__modelname__get","parameters":[{"required":true,"schema":{"title":"Modelname"},"name":"modelname","in":"path"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"post":{"tags":["AAKR"],"summary":"Request train AAKR model","operationId":"train_aakr__modelname__post","parameters":[{"required":true,"schema":{"title":"Modelname","type":"string"},"name":"modelname","in":"path"}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/TrainAAKR"}}},"required":true},"responses":{"201":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/aakr/test/{modelname}":{"post":{"tags":["AAKR"],"summary":"Test for AAKR model calculation","operationId":"test_aakr_test__modelname__post","parameters":[{"required":true,"schema":{"title":"Modelname","type":"string"},"name":"modelname","in":"path"}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/TestAAKR"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TestResult"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/vae/{modelname}":{"post":{"tags":["VAE"],"summary":"Request train VAE model","description":"**Precondition**\n- Check memory usage of server is higher then 80%\n- Check requested model training is already performing\n\n**Path Parameters**\n- **modelname**: modelname\n\n**Reuqest Body**\n- **scaler_type**: MinMaxScaler / StandardScaler\n- **optimizer_type**: ADAM / Adagrad, Adadelta, Nadam, SGD, RMSProp\n- **minmax_factors**: ??\n- **sampling_interval_seconds**: It must be 5 seconds only\n\n**Working Procedure**\n- Check precondition\n- Create new process to train model and initialize process\n- Response model train started for this api request\n\n- Start model training from new created process | send training status\n- Get data from database and processing it | send training status\n- Train model with the processed data | send training status, training progress\n- Save model (Not save if model quality is pool) | send training status\n- Process terminated","operationId":"train_vae__modelname__post","parameters":[{"required":true,"schema":{"title":"Modelname","type":"string"},"name":"modelname","in":"path"}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/TrainVAE"},"examples":{"Example1":{"summary":"[Normal] tagnames == target_tagnames","description":"Normal example","value":{"tagnames":["PDI1807","PI2512","FIC28601"],"target_tagnames":["PDI1807","PI2512","FIC28601"],"description":"string","data_params":{"sampling_interval_seconds":5,"durations":[{"start":"2022-04-27 16:00:00","end":"2022-04-27 20:00:00"},{"start":"2022-04-28 16:00:00","end":"2022-04-28 20:00:00"}]},"model_params":{"window_size":4,"scaler_type":"MinMaxScaler","optimizer_type":"ADAM"},"hyper_params":{"num_epochs":3,"batch_size":256,"learning_rate":0.0001,"early_stop_patience":10}}},"Example2":{"summary":"[Normal] tagnames != target_tagnames","description":"Normal example","value":{"tagnames":["PDI1807","PI2512","FIC28601"],"target_tagnames":["PDI1807","PI2512"],"description":"string","data_params":{"sampling_interval_seconds":5,"durations":[{"start":"2022-04-27 16:00:00","end":"2022-04-27 20:00:00"},{"start":"2022-04-28 16:00:00","end":"2022-04-28 20:00:00"}]},"model_params":{"window_size":4,"scaler_type":"MinMaxScaler","optimizer_type":"ADAM"},"hyper_params":{"num_epochs":3,"batch_size":256,"learning_rate":0.0001,"early_stop_patience":10}}},"Example3":{"summary":"[Error] target_tagnames not in tagnames","description":"each target tagname should be in tagnames","value":{"tagnames":["PDI1807","PI2512","FIC28601"],"target_tagnames":["PDI1807","PI2512"],"description":"string","data_params":{"sampling_interval_seconds":5,"durations":[{"start":"2022-04-27 16:00:00","end":"2022-04-27 20:00:00"},{"start":"2022-04-28 16:00:00","end":"2022-04-28 20:00:00"}]},"model_params":{"window_size":4,"scaler_type":"MinMaxScaler","optimizer_type":"ADAM"},"hyper_params":{"num_epochs":3,"batch_size":256,"learning_rate":0.0001,"early_stop_patience":10}}},"Example4":{"summary":"[Error] Wrong duration","description":"end duration must greater than start duration","value":{"tagnames":["PDI1807","PI2512","FIC28601"],"target_tagnames":["PDI1807","PI2512"],"description":"string","data_params":{"sampling_interval_seconds":5,"durations":[{"start":"2022-04-27 22:00:00","end":"2022-04-27 20:00:00"},{"start":"2022-04-28 16:00:00","end":"2022-04-28 20:00:00"}]},"model_params":{"window_size":4,"scaler_type":"MinMaxScaler","optimizer_type":"ADAM"},"hyper_params":{"num_epochs":3,"batch_size":256,"learning_rate":0.0001,"early_stop_patience":10}}}}}}},"responses":{"202":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/vae/test/{modelname}":{"post":{"tags":["VAE"],"summary":"Test for VAE model calculation","operationId":"test_vae_test__modelname__post","parameters":[{"required":true,"schema":{"title":"Modelname","type":"string"},"name":"modelname","in":"path"}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/TestVAE"},"examples":{"Example1":{"summary":"[Normal] tagnames == target_tagnames","description":"Normal Example 1","value":{"tagnames":["PDI1807","PI2512","FIC28601"],"target_tagnames":["PDI1807","PI2512","FIC28601"],"data_params":{"sampling_interval_seconds":5,"durations":[{"start":"2022-04-27 16:00:00","end":"2022-04-27 20:00:00"}]},"model_params":{"window_size":4,"scaler_type":"MinMaxScaler","optimizer_type":"ADAM"}}},"Example2":{"summary":"[Normal] tagnames != target_tagnames","description":"Normal Example 2","value":{"tagnames":["PDI1807","PI2512","FIC28601"],"target_tagnames":["PDI1807","PI2512"],"data_params":{"sampling_interval_seconds":5,"durations":[{"start":"2022-04-27 16:00:00","end":"2022-04-27 20:00:00"}]},"model_params":{"window_size":4,"scaler_type":"MinMaxScaler","optimizer_type":"ADAM"}}}}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TestResult"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/arima/{modelname}":{"get":{"tags":["ARIMA"],"summary":"Load ARIMA model info","operationId":"load_arima__modelname__get","parameters":[{"required":true,"schema":{"title":"Modelname"},"name":"modelname","in":"path"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"post":{"tags":["ARIMA"],"summary":"Request train ARIMA model","description":"**Reuqest Body**\n- **p**: Order of the autoregressive part\n- **d**: Degree to which the first difference is included\n- **q**: The order of the moving average part\n- **sampling_interval_seconds**: It must be 5 seconds only    ","operationId":"train_arima__modelname__post","parameters":[{"required":true,"schema":{"title":"Modelname","type":"string"},"name":"modelname","in":"path"}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/TrainARIMA"}}},"required":true},"responses":{"201":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/arima/test/{modelname}":{"post":{"tags":["ARIMA"],"summary":"Test for ARIMA model calculation","operationId":"test_arima_test__modelname__post","parameters":[{"required":true,"schema":{"title":"Modelname","type":"string"},"name":"modelname","in":"path"}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/TestARIMA"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TestResult"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/pdmd/{modelname}":{"post":{"tags":["PDMD"],"summary":"Request train PDMD model","description":"**Reuqest Body**\n- **wait_sec**: Time to wait for predictions to be calculated after the value dropped\n- **window_time**: Time period of data to use for slope calculation","operationId":"train_pdmd__modelname__post","parameters":[{"required":true,"schema":{"title":"Modelname","type":"string"},"name":"modelname","in":"path"}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/TrainPDMD"}}},"required":true},"responses":{"201":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/pdmd/test/{modelname}":{"post":{"tags":["PDMD"],"summary":"Test for PDMD model calculation","operationId":"test_pdmd_test__modelname__post","parameters":[{"required":true,"schema":{"title":"Modelname","type":"string"},"name":"modelname","in":"path"}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/TestPDMD"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TestResult"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/common/model_list":{"get":{"tags":["COMMON"],"summary":"Get list of all models","description":"**Response list of all models which is stored as model file.** ","operationId":"get_model_list_common_model_list_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/common/modelfile/{model_key}":{"get":{"tags":["COMMON"],"summary":"Get model file list for requested model key","description":"**Response model file which is stored as model file.** ","operationId":"get_modelfile_common_modelfile__model_key__get","parameters":[{"required":true,"schema":{"title":"Model Key"},"name":"model_key","in":"path"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/common/{modeltype}/{modelname}":{"delete":{"tags":["COMMON"],"summary":"Delete model file","description":"**Deleted model files can never be restored.**\n**Character case insensitivity for requested path parameters(modeltype, modelname).**","operationId":"delete_common__modeltype___modelname__delete","parameters":[{"required":true,"schema":{"title":"Modeltype"},"name":"modeltype","in":"path"},{"required":true,"schema":{"title":"Modelname"},"name":"modelname","in":"path"}],"responses":{"204":{"description":"Successful Response"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}}},"components":{"schemas":{"ARIMAModelParams":{"title":"ARIMAModelParams","type":"object","properties":{"p":{"title":"P","maximum":5.0,"minimum":1.0,"type":"integer","default":1},"d":{"title":"D","maximum":5.0,"minimum":0.0,"type":"integer","default":0},"q":{"title":"Q","maximum":5.0,"minimum":1.0,"type":"integer","default":1}}},"AlarmSLOPESetting":{"title":"AlarmSLOPESetting","type":"object","properties":{"enable":{"title":"Enable","type":"boolean","default":false},"normal_slope":{"title":"Normal Slope","type":"number","default":1.0},"deadband":{"title":"Deadband","type":"number","default":0.0}}},"AlarmSPRTSetting":{"title":"AlarmSPRTSetting","type":"object","properties":{"enable":{"title":"Enable","type":"boolean","default":false},"m0":{"title":"M0","type":"number","default":0.0},"s0":{"title":"S0","type":"number","default":1.0},"m":{"title":"M","type":"number","default":2.0},"s":{"title":"S","type":"number","default":3.0},"alpha":{"title":"Alpha","type":"number","default":0.01},"beta":{"title":"Beta","type":"number","default":0.01}}},"AlarmThresholdSetting":{"title":"AlarmThresholdSetting","type":"object","properties":{"enable":{"title":"Enable","type":"boolean","default":true},"threshold":{"title":"Threshold","type":"number","default":1.0},"deadband":{"title":"Deadband","type":"number","default":0.0}}},"BasicInfo":{"title":"BasicInfo","required":["modeltype","modelname"],"type":"object","properties":{"modeltype":{"title":"Modeltype","type":"string"},"modelname":{"title":"Modelname","type":"string"}}},"DataParamsDefaultDuration":{"title":"DataParamsDefaultDuration","type":"object","properties":{"duration_start":{"title":"Duration Start","pattern":"^(([0-9]{4})-(0?[1-9]|1[0-2])-(0?[1-9]|1[0-9]|2[0-9]|3[0-1]) (0?[0-9]|1[0-9]|2[0-3]):(0?[0-9]|[0-5][0-9]):(0?[0-9]|[0-5][0-9]))$","type":"string","default":"2022-05-27 21:00:00"},"duration_end":{"title":"Duration End","pattern":"^(([0-9]{4})-(0?[1-9]|1[0-2])-(0?[1-9]|1[0-9]|2[0-9]|3[0-1]) (0?[0-9]|1[0-9]|2[0-3]):(0?[0-9]|[0-5][0-9]):(0?[0-9]|[0-5][0-9]))$","type":"string","default":"2022-05-27 21:30:00"}}},"DataParamsMultipleDuration":{"title":"DataParamsMultipleDuration","required":["durations"],"type":"object","properties":{"sampling_interval_seconds":{"title":"Sampling Interval Seconds","maximum":8640000.0,"minimum":1.0,"type":"integer","default":5},"durations":{"title":"Durations","minItems":1,"type":"array","items":{"$ref":"#/components/schemas/Durations"}}}},"DataParamsSingleDuration":{"title":"DataParamsSingleDuration","type":"object","properties":{"sampling_interval_seconds":{"title":"Sampling Interval Seconds","maximum":8640000.0,"minimum":1.0,"type":"integer","default":5},"duration_start":{"title":"Duration Start","pattern":"^(([0-9]{4})-(0?[1-9]|1[0-2])-(0?[1-9]|1[0-9]|2[0-9]|3[0-1]) (0?[0-9]|1[0-9]|2[0-3]):(0?[0-9]|[0-5][0-9]):(0?[0-9]|[0-5][0-9]))$","type":"string","default":"2022-04-28 18:00:00"},"duration_end":{"title":"Duration End","pattern":"^(([0-9]{4})-(0?[1-9]|1[0-2])-(0?[1-9]|1[0-9]|2[0-9]|3[0-1]) (0?[0-9]|1[0-9]|2[0-3]):(0?[0-9]|[0-5][0-9]):(0?[0-9]|[0-5][0-9]))$","type":"string","default":"2022-04-28 20:10:00"}}},"Durations":{"title":"Durations","type":"object","properties":{"start":{"title":"Start","pattern":"^(([0-9]{4})-(0?[1-9]|1[0-2])-(0?[1-9]|1[0-9]|2[0-9]|3[0-1]) (0?[0-9]|1[0-9]|2[0-3]):(0?[0-9]|[0-5][0-9]):(0?[0-9]|[0-5][0-9]))$","type":"string","default":"2022-04-28 18:00:00"},"end":{"title":"End","pattern":"^(([0-9]{4})-(0?[1-9]|1[0-2])-(0?[1-9]|1[0-9]|2[0-9]|3[0-1]) (0?[0-9]|1[0-9]|2[0-3]):(0?[0-9]|[0-5][0-9]):(0?[0-9]|[0-5][0-9]))$","type":"string","default":"2022-04-28 20:10:00"}}},"HTTPValidationError":{"title":"HTTPValidationError","type":"object","properties":{"detail":{"title":"Detail","type":"array","items":{"$ref":"#/components/schemas/ValidationError"}}}},"PDMDModelParamsTest":{"title":"PDMDModelParamsTest","type":"object","properties":{"wait_sec":{"title":"Wait Sec","maximum":86400.0,"minimum":0.0,"type":"integer","default":60},"diff_threshold_lb":{"title":"Diff Threshold Lb","type":"number","default":-21.423},"diff_threshold_ub":{"title":"Diff Threshold Ub","type":"number","default":21.423},"normal_slope":{"title":"Normal Slope","type":"number","default":0.00152},"window_time":{"title":"Window Time","maximum":432000.0,"minimum":30.0,"type":"integer","default":3600}}},"PDMDModelParamsTrain":{"title":"PDMDModelParamsTrain","type":"object","properties":{"wait_sec":{"title":"Wait Sec","maximum":86400.0,"minimum":0.0,"type":"integer","default":60},"window_time":{"title":"Window Time","maximum":86400.0,"minimum":1.0,"type":"integer","default":3600}}},"TagAlarmSetting":{"title":"TagAlarmSetting","required":["threshold","sprt","slope"],"type":"object","properties":{"threshold":{"$ref":"#/components/schemas/AlarmThresholdSetting"},"sprt":{"$ref":"#/components/schemas/AlarmSPRTSetting"},"slope":{"$ref":"#/components/schemas/AlarmSLOPESetting"}}},"TagSetting":{"title":"TagSetting","required":["tagname","setting"],"type":"object","properties":{"tagname":{"title":"Tagname","type":"string"},"setting":{"$ref":"#/components/schemas/TagAlarmSetting"}}},"TestAAKR":{"title":"TestAAKR","type":"object","properties":{"tagnames":{"title":"Tagnames","type":"array","items":{"type":"string"},"default":["TagA","TagB","TagC"]},"data":{"title":"Data","type":"array","items":{"type":"array","items":{"type":"number"}},"default":[[10.0,100.1,9834.24],[10.1,103.0,9612.4],[10.2,98.7,9207.36],[9.9,99.5,9406.2],[10.1,97.9,9559.801]]}}},"TestARIMA":{"title":"TestARIMA","required":["data_params"],"type":"object","properties":{"tagname":{"title":"Tagname","type":"string","default":"TI2401C"},"data_params":{"$ref":"#/components/schemas/DataParamsSingleDuration"}}},"TestPDMD":{"title":"TestPDMD","required":["data_params","model_params"],"type":"object","properties":{"tagname":{"title":"Tagname","type":"string","default":"TI2401C"},"data_params":{"$ref":"#/components/schemas/DataParamsDefaultDuration"},"model_params":{"$ref":"#/components/schemas/PDMDModelParamsTest"}}},"TestResult":{"title":"TestResult","required":["detail","tag_settings"],"type":"object","properties":{"message":{"title":"Message","type":"string","default":"Requested test has been completed"},"detail":{"$ref":"#/components/schemas/BasicInfo"},"data":{"title":"Data","anyOf":[{"type":"string"},{"type":"array","items":{"type":"object","additionalProperties":{"type":"number"}}},{"type":"array","items":{"type":"number"}},{"type":"array","items":{"type":"array","items":{"type":"number"}}},{"type":"array","items":{}}],"default":[]},"tag_settings":{"title":"Tag Settings","type":"array","items":{"$ref":"#/components/schemas/TagSetting"}}}},"TestVAE":{"title":"TestVAE","required":["tagnames","target_tagnames","data_params","model_params"],"type":"object","properties":{"tagnames":{"title":"Tagnames","maxItems":50,"minItems":1,"type":"array","items":{"type":"string"}},"target_tagnames":{"title":"Target Tagnames","maxItems":50,"minItems":1,"type":"array","items":{"type":"string"}},"data_params":{"$ref":"#/components/schemas/DataParamsMultipleDuration"},"model_params":{"$ref":"#/components/schemas/VAEModelParams"}}},"TrainAAKR":{"title":"TrainAAKR","type":"object","properties":{"description":{"title":"Description","type":"string"},"tagnames":{"title":"Tagnames","type":"array","items":{"type":"string"},"default":["TagA","TagB","TagC"]},"data":{"title":"Data","type":"array","items":{"type":"array","items":{"type":"number"}},"default":[[10.0,100.1,9834.24],[10.1,103.0,9612.4],[10.2,98.7,9207.36],[9.9,99.5,9406.2],[10.1,97.9,9559.801]]}}},"TrainARIMA":{"title":"TrainARIMA","required":["data_params","model_params"],"type":"object","properties":{"description":{"title":"Description","type":"string"},"tagname":{"title":"Tagname","type":"string","default":"TI2401C"},"data_params":{"$ref":"#/components/schemas/DataParamsSingleDuration"},"model_params":{"$ref":"#/components/schemas/ARIMAModelParams"}}},"TrainPDMD":{"title":"TrainPDMD","required":["data_params","model_params"],"type":"object","properties":{"description":{"title":"Description","type":"string"},"tagname":{"title":"Tagname","type":"string","default":"TI2401C"},"data_params":{"$ref":"#/components/schemas/DataParamsDefaultDuration"},"model_params":{"$ref":"#/components/schemas/PDMDModelParamsTrain"}}},"TrainVAE":{"title":"TrainVAE","required":["tagnames","target_tagnames","data_params","model_params","hyper_params"],"type":"object","properties":{"tagnames":{"title":"Tagnames","maxItems":50,"minItems":1,"type":"array","items":{"type":"string"}},"target_tagnames":{"title":"Target Tagnames","maxItems":50,"minItems":1,"type":"array","items":{"type":"string"}},"description":{"title":"Description","type":"string"},"data_params":{"$ref":"#/components/schemas/DataParamsMultipleDuration"},"model_params":{"$ref":"#/components/schemas/VAEModelParams"},"hyper_params":{"$ref":"#/components/schemas/VAEHyperParams"}}},"VAEHyperParams":{"title":"VAEHyperParams","type":"object","properties":{"num_epochs":{"title":"Num Epochs","maximum":10000.0,"minimum":1.0,"type":"integer","default":3},"batch_size":{"title":"Batch Size","multipleOf":2.0,"maximum":16384.0,"minimum":1.0,"type":"integer","default":256},"learning_rate":{"title":"Learning Rate","maximum":0.5,"minimum":1e-11,"type":"number","default":0.0001},"early_stop_patience":{"title":"Early Stop Patience","minimum":1.0,"type":"integer"}}},"VAEModelParams":{"title":"VAEModelParams","type":"object","properties":{"window_size":{"title":"Window Size","multipleOf":2.0,"maximum":512.0,"minimum":1.0,"type":"integer","default":4},"scaler_type":{"title":"Scaler Type","type":"string","default":"MinMaxScaler"},"optimizer_type":{"title":"Optimizer Type","type":"string","default":"ADAM"}}},"ValidationError":{"title":"ValidationError","required":["loc","msg","type"],"type":"object","properties":{"loc":{"title":"Location","type":"array","items":{"type":"string"}},"msg":{"title":"Message","type":"string"},"type":{"title":"Error Type","type":"string"}}}}}}
